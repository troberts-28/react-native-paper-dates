{"version":3,"names":["React","View","StyleSheet","useWindowDimensions","DatePickerModalHeader","DayTimePickerModalContentHeader","DatePickerModalHeaderBackground","AnalogClock","toHourInputFormat","toHourOutputFormat","circleSize","clockTypes","DisplayModeContext","TimeInputs","DayOfWeek","DateTimePickerModalContent","props","onChange","onConfirm","onDismiss","disableSafeTop","locale","hideDayPicker","hideTimePicker","anyProps","dimensions","isLandscape","width","height","focused","setFocused","useState","hours","localHours","setLocalHours","localMinutes","setLocalMinutes","getMinutes","minutes","localDayIndex","setLocalDayIndex","getDayIndex","dayIndex","displayMode","setDisplayMode","undefined","useEffect","getHours","onInnerChangeDay","useCallback","onFocusInput","type","onChangeClock","params","onInnerChangeClock","onInnerConfirm","flex","justifyContent","alignItems","isLoading","saveLabel","saveLabelDisabled","uppercase","closeIcon","duration","headerSeparator","emptyLabel","label","moreLabel","startLabel","endLabel","flexDirection","marginTop","Array","from","map","_","index","adjustedIndex","mode","setMode","styles","rootLandscape","rootPortrait","clockContainer","Date","create","padding","memo"],"sources":["DayTimePickerModalContent.tsx"],"sourcesContent":["import * as React from 'react'\nimport { View, StyleSheet, useWindowDimensions } from 'react-native'\n\nimport DatePickerModalHeader from './DatePickerModalHeader'\nimport DayTimePickerModalContentHeader, {\n  HeaderPickProps,\n} from './DayTimePickerModalContentHeader'\nimport DatePickerModalHeaderBackground from './DatePickerModalHeaderBackground'\nimport AnalogClock from '../Time/AnalogClock'\nimport {\n  toHourInputFormat,\n  toHourOutputFormat,\n  circleSize,\n  clockTypes,\n  PossibleClockTypes,\n} from '../Time/timeUtils'\nimport { DisplayModeContext } from '../Time/TimePicker'\nimport TimeInputs from '../Time/TimeInputs'\nimport DayOfWeek from './DayOfWeek'\n\ntype onChangeFunc = ({\n  hours,\n  minutes,\n  focused,\n}: {\n  hours: number\n  minutes: number\n  focused?: undefined | PossibleClockTypes\n}) => any\n\nexport interface DayTimePickerModalContentProps extends HeaderPickProps {\n  inputFormat?: string\n  locale: string\n  onDismiss: () => any\n  isLoading?: boolean\n  disableSafeTop?: boolean\n  saveLabelDisabled?: boolean\n  hideDayPicker?: boolean\n  hideTimePicker?: boolean\n  dayIndex?: number | undefined\n  hours?: number | undefined\n  minutes?: number | undefined\n  duration?: number | undefined | null\n  onChange?: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n  onConfirm: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n}\n\nexport function DateTimePickerModalContent(\n  props: DayTimePickerModalContentProps\n) {\n  const {\n    onChange,\n    onConfirm,\n    onDismiss,\n    disableSafeTop,\n    locale,\n    hideDayPicker,\n    hideTimePicker,\n  } = props\n\n  const anyProps = props as any\n\n  const dimensions = useWindowDimensions()\n  const isLandscape = dimensions.width > dimensions.height\n\n  const [focused, setFocused] = React.useState<PossibleClockTypes>(\n    clockTypes.hours\n  )\n  const [localHours, setLocalHours] = React.useState<number>(anyProps.hours)\n  const [localMinutes, setLocalMinutes] = React.useState<number>(\n    getMinutes(anyProps.minutes)\n  )\n  const [localDayIndex, setLocalDayIndex] = React.useState<number>(\n    getDayIndex(anyProps.dayIndex)\n  )\n\n  const [displayMode, setDisplayMode] = React.useState<'AM' | 'PM' | undefined>(\n    undefined\n  )\n\n  // Initialize display Mode according the hours value\n  React.useEffect(() => {\n    if ((props.hours ?? 0) >= 12) {\n      setDisplayMode('PM')\n    } else {\n      setDisplayMode('AM')\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // update local state if changed from outside or if modal is opened\n  React.useEffect(() => {\n    setLocalDayIndex(getDayIndex(anyProps.dayIndex))\n    setLocalHours(getHours(anyProps.hours))\n    setLocalMinutes(getMinutes(anyProps.minutes))\n  }, [anyProps.hours, anyProps.minutes, anyProps.dayIndex])\n\n  const onInnerChangeDay = React.useCallback(\n    (dayIndex: number) => {\n      onChange &&\n        onChange({\n          dayIndex: dayIndex,\n          hours: localHours,\n          minutes: localMinutes,\n        })\n      setLocalDayIndex(dayIndex)\n    },\n    [localHours, localMinutes, onChange]\n  )\n\n  const onFocusInput = React.useCallback(\n    (type: PossibleClockTypes) => setFocused(type),\n    []\n  )\n  const onChangeClock = React.useCallback(\n    (params: {\n      focused?: PossibleClockTypes | undefined\n      hours: number\n      minutes: number\n    }) => {\n      if (params.focused) {\n        setFocused(params.focused)\n      }\n\n      setLocalHours(params.hours)\n      setLocalMinutes(params.minutes)\n    },\n    [setFocused, setLocalHours, setLocalMinutes]\n  )\n\n  const onInnerChangeClock = React.useCallback<onChangeFunc>(\n    (params: any) => {\n      params.hours = toHourOutputFormat(params.hours, localHours, true)\n      onChangeClock(params)\n    },\n    [localHours, onChangeClock]\n  )\n\n  const onInnerConfirm = React.useCallback(() => {\n    onConfirm({\n      dayIndex: localDayIndex,\n      hours: localHours,\n      minutes: localMinutes,\n    })\n  }, [onConfirm, localDayIndex, localHours, localMinutes])\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n      }}\n    >\n      <DatePickerModalHeaderBackground>\n        <DatePickerModalHeader\n          locale={locale}\n          onSave={onInnerConfirm}\n          isLoading={props.isLoading}\n          onDismiss={onDismiss}\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          uppercase={props.uppercase || true}\n          disableSafeTop={disableSafeTop}\n          closeIcon={props.closeIcon}\n          hideSaveButton\n        />\n        <DayTimePickerModalContentHeader\n          dayIndex={localDayIndex}\n          hours={localHours}\n          minutes={localMinutes}\n          duration={anyProps.duration}\n          mode=\"single\"\n          collapsed={true}\n          headerSeparator={props.headerSeparator}\n          emptyLabel={props.emptyLabel}\n          label={props.label}\n          moreLabel={props.moreLabel}\n          startLabel={props.startLabel}\n          endLabel={props.endLabel}\n          uppercase={props.uppercase || true}\n          locale={locale}\n          showSaveButton\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          isLoading={props.isLoading}\n          onSave={onInnerConfirm}\n        />\n      </DatePickerModalHeaderBackground>\n\n      {!hideDayPicker ? (\n        <View\n          style={\n            !hideDayPicker\n              ? { flexDirection: 'row', marginTop: 32 }\n              : {\n                  flex: 1,\n                  flexDirection: 'row',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }\n          }\n        >\n          {Array.from(Array(7)).map((_, index) => {\n            // required for Monday to show first\n            const adjustedIndex = index < 6 ? index + 1 : 0\n            return (\n              <DayOfWeek\n                dayIndex={adjustedIndex}\n                selected={localDayIndex === adjustedIndex}\n                onPressDay={onInnerChangeDay}\n                primaryColor=\"#0B6327\"\n                disabled={false}\n                textColorOnPrimary=\"#fff\"\n              />\n            )\n          })}\n        </View>\n      ) : null}\n      {!hideTimePicker ? (\n        <DisplayModeContext.Provider\n          value={{ mode: displayMode, setMode: setDisplayMode }}\n        >\n          <View\n            style={isLandscape ? styles.rootLandscape : styles.rootPortrait}\n          >\n            <TimeInputs\n              inputType={'keyboard'}\n              hours={localHours}\n              minutes={localMinutes}\n              is24Hour\n              onChange={onChangeClock}\n              onFocusInput={onFocusInput}\n              focused={focused}\n            />\n            <View style={styles.clockContainer}>\n              <AnalogClock\n                hours={toHourInputFormat(localHours, true)}\n                minutes={localMinutes}\n                focused={focused}\n                is24Hour\n                onChange={onInnerChangeClock}\n              />\n            </View>\n          </View>\n        </DisplayModeContext.Provider>\n      ) : null}\n    </View>\n  )\n}\n\nfunction getMinutes(minutes: number | undefined | null): number {\n  return minutes === undefined || minutes === null\n    ? new Date().getMinutes()\n    : minutes\n}\nfunction getHours(hours: number | undefined | null): number {\n  return hours === undefined || hours === null ? new Date().getHours() : hours\n}\nfunction getDayIndex(dayIndex: number | undefined | null): number {\n  return dayIndex === undefined ||\n    dayIndex === null ||\n    dayIndex < 0 ||\n    dayIndex > 6\n    ? 0\n    : dayIndex\n}\n\nconst styles = StyleSheet.create({\n  rootLandscape: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 24 * 3 + 96 * 2 + circleSize,\n  },\n  rootPortrait: {},\n  clockContainer: { padding: 12 },\n})\n\nexport default React.memo(DateTimePickerModalContent)\n"],"mappings":"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"}