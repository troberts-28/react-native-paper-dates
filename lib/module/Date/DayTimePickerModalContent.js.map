{"version":3,"names":["React","View","StyleSheet","useWindowDimensions","DatePickerModalHeader","DayTimePickerModalContentHeader","DatePickerModalHeaderBackground","AnalogClock","toHourInputFormat","toHourOutputFormat","circleSize","clockTypes","TimeInputs","DayOfWeek","DateTimePickerModalContent","props","onChange","onConfirm","onDismiss","disableSafeTop","locale","anyProps","dimensions","isLandscape","width","height","focused","setFocused","useState","hours","localHours","setLocalHours","localMinutes","setLocalMinutes","getMinutes","minutes","localDayIndex","setLocalDayIndex","getDayIndex","dayIndex","useEffect","getHours","onInnerChangeDay","useCallback","onFocusInput","type","onChangeClock","params","onInnerChangeClock","onInnerConfirm","flex","justifyContent","alignItems","isLoading","saveLabel","saveLabelDisabled","uppercase","closeIcon","duration","headerSeparator","emptyLabel","label","moreLabel","startLabel","endLabel","flexDirection","marginTop","Array","from","map","_","index","adjustedIndex","styles","rootLandscape","rootPortrait","clockContainer","undefined","Date","create","padding","memo"],"sources":["DayTimePickerModalContent.tsx"],"sourcesContent":["import * as React from 'react'\nimport { View, StyleSheet, useWindowDimensions } from 'react-native'\n\nimport DatePickerModalHeader from './DatePickerModalHeader'\nimport DayTimePickerModalContentHeader, {\n  HeaderPickProps,\n} from './DayTimePickerModalContentHeader'\nimport DatePickerModalHeaderBackground from './DatePickerModalHeaderBackground'\nimport AnalogClock from '../Time/AnalogClock'\nimport {\n  toHourInputFormat,\n  toHourOutputFormat,\n  circleSize,\n  clockTypes,\n  PossibleClockTypes,\n} from '../Time/timeUtils'\nimport TimeInputs from '../Time/TimeInputs'\nimport DayOfWeek from './DayOfWeek'\n\ntype onChangeFunc = ({\n  hours,\n  minutes,\n  focused,\n}: {\n  hours: number\n  minutes: number\n  focused?: undefined | PossibleClockTypes\n}) => any\n\nexport interface DayTimePickerModalContentProps extends HeaderPickProps {\n  inputFormat?: string\n  locale: string\n  onDismiss: () => any\n  isLoading?: boolean\n  disableSafeTop?: boolean\n  saveLabelDisabled?: boolean\n  dayIndex?: number | undefined\n  hours?: number | undefined\n  minutes?: number | undefined\n  duration?: number | undefined | null\n  onChange?: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n  onConfirm: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n}\n\nexport function DateTimePickerModalContent(\n  props: DayTimePickerModalContentProps\n) {\n  const { onChange, onConfirm, onDismiss, disableSafeTop, locale } = props\n\n  const anyProps = props as any\n\n  const dimensions = useWindowDimensions()\n  const isLandscape = dimensions.width > dimensions.height\n\n  const [focused, setFocused] = React.useState<PossibleClockTypes>(\n    clockTypes.hours\n  )\n  const [localHours, setLocalHours] = React.useState<number>(anyProps.hours)\n  const [localMinutes, setLocalMinutes] = React.useState<number>(\n    getMinutes(anyProps.minutes)\n  )\n  const [localDayIndex, setLocalDayIndex] = React.useState<number>(\n    getDayIndex(anyProps.dayIndex)\n  )\n\n  // update local state if changed from outside or if modal is opened\n  React.useEffect(() => {\n    setLocalDayIndex(getDayIndex(anyProps.dayIndex))\n    setLocalHours(getHours(anyProps.hours))\n    setLocalMinutes(getMinutes(anyProps.minutes))\n  }, [anyProps.hours, anyProps.minutes, anyProps.dayIndex])\n\n  const onInnerChangeDay = React.useCallback(\n    (dayIndex: number) => {\n      onChange &&\n        onChange({\n          dayIndex: dayIndex,\n          hours: localHours,\n          minutes: localMinutes,\n        })\n      setLocalDayIndex(dayIndex)\n    },\n    [localHours, localMinutes, onChange]\n  )\n\n  const onFocusInput = React.useCallback(\n    (type: PossibleClockTypes) => setFocused(type),\n    []\n  )\n  const onChangeClock = React.useCallback(\n    (params: {\n      focused?: PossibleClockTypes | undefined\n      hours: number\n      minutes: number\n    }) => {\n      if (params.focused) {\n        setFocused(params.focused)\n      }\n\n      setLocalHours(params.hours)\n      setLocalMinutes(params.minutes)\n    },\n    [setFocused, setLocalHours, setLocalMinutes]\n  )\n\n  const onInnerChangeClock = React.useCallback<onChangeFunc>(\n    (params: any) => {\n      params.hours = toHourOutputFormat(params.hours, localHours, true)\n      onChangeClock(params)\n    },\n    [localHours, onChangeClock]\n  )\n\n  const onInnerConfirm = React.useCallback(() => {\n    onConfirm({\n      dayIndex: localDayIndex,\n      hours: localHours,\n      minutes: localMinutes,\n    })\n  }, [onConfirm, localDayIndex, localHours, localMinutes])\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n      }}\n    >\n      <DatePickerModalHeaderBackground>\n        <DatePickerModalHeader\n          locale={locale}\n          onSave={onInnerConfirm}\n          isLoading={props.isLoading}\n          onDismiss={onDismiss}\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          uppercase={props.uppercase || true}\n          disableSafeTop={disableSafeTop}\n          closeIcon={props.closeIcon}\n          hideSaveButton\n        />\n        <DayTimePickerModalContentHeader\n          dayIndex={localDayIndex}\n          hours={localHours}\n          minutes={localMinutes}\n          duration={anyProps.duration}\n          mode=\"single\"\n          collapsed={true}\n          headerSeparator={props.headerSeparator}\n          emptyLabel={props.emptyLabel}\n          label={props.label}\n          moreLabel={props.moreLabel}\n          startLabel={props.startLabel}\n          endLabel={props.endLabel}\n          uppercase={props.uppercase || true}\n          locale={locale}\n          showSaveButton\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          isLoading={props.isLoading}\n          onSave={onInnerConfirm}\n        />\n      </DatePickerModalHeaderBackground>\n\n      <View style={{ flexDirection: 'row', marginTop: 32 }}>\n        {Array.from(Array(7)).map((_, index) => {\n          // required for Monday to show first\n          const adjustedIndex = index < 6 ? index + 1 : 0\n          return (\n            <DayOfWeek\n              dayIndex={adjustedIndex}\n              selected={localDayIndex === adjustedIndex}\n              onPressDay={onInnerChangeDay}\n              primaryColor=\"#0B6327\"\n              disabled={false}\n              textColorOnPrimary=\"#fff\"\n            />\n          )\n        })}\n      </View>\n\n      <View style={isLandscape ? styles.rootLandscape : styles.rootPortrait}>\n        <TimeInputs\n          inputType={'picker'}\n          hours={localHours}\n          minutes={localMinutes}\n          is24Hour\n          onChange={onChangeClock}\n          onFocusInput={onFocusInput}\n          focused={focused}\n        />\n        <View style={styles.clockContainer}>\n          <AnalogClock\n            hours={toHourInputFormat(localHours, true)}\n            minutes={localMinutes}\n            focused={focused}\n            is24Hour\n            onChange={onInnerChangeClock}\n          />\n        </View>\n      </View>\n    </View>\n  )\n}\n\nfunction getMinutes(minutes: number | undefined | null): number {\n  return minutes === undefined || minutes === null\n    ? new Date().getMinutes()\n    : minutes\n}\nfunction getHours(hours: number | undefined | null): number {\n  return hours === undefined || hours === null ? new Date().getHours() : hours\n}\nfunction getDayIndex(dayIndex: number | undefined | null): number {\n  return dayIndex === undefined ||\n    dayIndex === null ||\n    dayIndex < 0 ||\n    dayIndex > 6\n    ? 0\n    : dayIndex\n}\n\nconst styles = StyleSheet.create({\n  rootLandscape: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 24 * 3 + 96 * 2 + circleSize,\n  },\n  rootPortrait: {},\n  clockContainer: { padding: 12 },\n})\n\nexport default React.memo(DateTimePickerModalContent)\n"],"mappings":"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"}