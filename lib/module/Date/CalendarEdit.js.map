{"version":3,"names":["React","View","StyleSheet","Keyboard","DatePickerInputWithoutModal","CalendarEdit","mode","state","label","startLabel","endLabel","collapsed","onChange","validRange","locale","dateInput","useRef","startInput","endInput","useEffect","dismiss","inputsToFocus","current","filter","n","inputsToBlur","forEach","ip","blur","focus","onSubmitStartInput","useCallback","onSubmitEndInput","onSubmitInput","styles","root","date","inner","startDate","separator","endDate","create","padding","flexDirection","inputContainer","flex","input","width","memo"],"sources":["CalendarEdit.tsx"],"sourcesContent":["import * as React from 'react'\nimport {\n  View,\n  StyleSheet,\n  TextInput as TextInputNative,\n  Keyboard,\n} from 'react-native'\n\nimport type { ModeType, ValidRangeType } from './Calendar'\nimport type { LocalState } from './DatePickerModalContent'\n\nimport DatePickerInputWithoutModal from './DatePickerInputWithoutModal'\n\nfunction CalendarEdit({\n  mode,\n  state,\n  label = '',\n  startLabel = 'Start',\n  endLabel = 'End',\n  collapsed,\n  onChange,\n  validRange,\n  locale,\n}: {\n  mode: ModeType\n  label?: string\n  startLabel?: string\n  endLabel?: string\n  state: LocalState\n  collapsed: boolean\n  onChange: (s: LocalState) => any\n  validRange: ValidRangeType | undefined\n  locale: string\n}) {\n  const dateInput = React.useRef<TextInputNative | null>(null)\n  const startInput = React.useRef<TextInputNative | null>(null)\n  const endInput = React.useRef<TextInputNative | null>(null)\n\n  // when switching views focus, or un-focus text input\n  React.useEffect(() => {\n    // hide open keyboard\n    if (collapsed) {\n      Keyboard.dismiss()\n    }\n\n    const inputsToFocus = [dateInput.current, startInput.current].filter(\n      (n) => n\n    ) as TextInputNative[]\n\n    const inputsToBlur = [\n      dateInput.current,\n      startInput.current,\n      endInput.current,\n    ].filter((n) => n) as TextInputNative[]\n\n    if (collapsed) {\n      inputsToBlur.forEach((ip) => ip.blur())\n    } else {\n      inputsToFocus.forEach((ip) => ip.focus())\n    }\n  }, [mode, startInput, endInput, dateInput, collapsed])\n\n  const onSubmitStartInput = React.useCallback(() => {\n    if (endInput.current) {\n      endInput.current.focus()\n    }\n  }, [endInput])\n\n  const onSubmitEndInput = React.useCallback(() => {\n    // TODO: close modal and persist range\n  }, [])\n\n  const onSubmitInput = React.useCallback(() => {\n    // TODO: close modal and persist range\n  }, [])\n\n  return (\n    <View style={styles.root}>\n      {mode === 'single' ? (\n        <DatePickerInputWithoutModal\n          inputMode=\"start\"\n          ref={dateInput}\n          label={label}\n          value={state.date}\n          onChange={(date) => onChange({ ...state, date })}\n          onSubmitEditing={onSubmitInput}\n          validRange={validRange}\n          locale={locale}\n          withModal={false}\n          autoComplete={'off'}\n        />\n      ) : null}\n      {mode === 'range' ? (\n        <View style={styles.inner}>\n          <DatePickerInputWithoutModal\n            inputMode=\"start\"\n            ref={startInput}\n            label={startLabel}\n            value={state.startDate}\n            onChange={(startDate) => onChange({ ...state, startDate })}\n            returnKeyType={'next'}\n            onSubmitEditing={onSubmitStartInput}\n            validRange={validRange}\n            locale={locale}\n            withModal={false}\n            autoComplete={'off'}\n          />\n          <View style={styles.separator} />\n          <DatePickerInputWithoutModal\n            inputMode=\"end\"\n            ref={endInput}\n            label={endLabel}\n            value={state.endDate}\n            onChange={(endDate) => onChange({ ...state, endDate })}\n            onSubmitEditing={onSubmitEndInput}\n            validRange={validRange}\n            locale={locale}\n            withModal={false}\n            autoComplete=\"off\"\n          />\n        </View>\n      ) : null}\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  root: { padding: 12 },\n  inner: { flexDirection: 'row' },\n  inputContainer: { flex: 1 },\n  input: { flex: 1 },\n  separator: { width: 12 },\n})\n\nexport default React.memo(CalendarEdit)\n"],"mappings":"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"}