{"version":3,"names":["DateTimePickerModalContent","props","onChange","onConfirm","onDismiss","disableSafeTop","locale","hideDayPicker","hideTimePicker","anyProps","dimensions","useWindowDimensions","isLandscape","width","height","focused","setFocused","React","useState","clockTypes","hours","localHours","setLocalHours","localMinutes","setLocalMinutes","getMinutes","minutes","localDayIndex","setLocalDayIndex","getDayIndex","dayIndex","displayMode","setDisplayMode","undefined","useEffect","getHours","onInnerChangeDay","useCallback","onFocusInput","type","onChangeClock","params","onInnerChangeClock","toHourOutputFormat","onInnerConfirm","flex","justifyContent","alignItems","isLoading","saveLabel","saveLabelDisabled","uppercase","closeIcon","duration","headerSeparator","emptyLabel","label","moreLabel","startLabel","endLabel","flexDirection","marginTop","Array","from","map","_","index","adjustedIndex","mode","setMode","styles","rootLandscape","rootPortrait","clockContainer","toHourInputFormat","Date","StyleSheet","create","circleSize","padding","memo"],"sources":["DayTimePickerModalContent.tsx"],"sourcesContent":["import * as React from 'react'\nimport { View, StyleSheet, useWindowDimensions } from 'react-native'\n\nimport DatePickerModalHeader from './DatePickerModalHeader'\nimport DayTimePickerModalContentHeader, {\n  HeaderPickProps,\n} from './DayTimePickerModalContentHeader'\nimport DatePickerModalHeaderBackground from './DatePickerModalHeaderBackground'\nimport AnalogClock from '../Time/AnalogClock'\nimport {\n  toHourInputFormat,\n  toHourOutputFormat,\n  circleSize,\n  clockTypes,\n  PossibleClockTypes,\n} from '../Time/timeUtils'\nimport { DisplayModeContext } from '../Time/TimePicker'\nimport TimeInputs from '../Time/TimeInputs'\nimport DayOfWeek from './DayOfWeek'\n\ntype onChangeFunc = ({\n  hours,\n  minutes,\n  focused,\n}: {\n  hours: number\n  minutes: number\n  focused?: undefined | PossibleClockTypes\n}) => any\n\nexport interface DayTimePickerModalContentProps extends HeaderPickProps {\n  inputFormat?: string\n  locale: string\n  onDismiss: () => any\n  isLoading?: boolean\n  disableSafeTop?: boolean\n  saveLabelDisabled?: boolean\n  hideDayPicker?: boolean\n  hideTimePicker?: boolean\n  dayIndex?: number | undefined\n  hours?: number | undefined\n  minutes?: number | undefined\n  duration?: number | undefined | null\n  onChange?: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n  onConfirm: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n}\n\nexport function DateTimePickerModalContent(\n  props: DayTimePickerModalContentProps\n) {\n  const {\n    onChange,\n    onConfirm,\n    onDismiss,\n    disableSafeTop,\n    locale,\n    hideDayPicker,\n    hideTimePicker,\n  } = props\n\n  const anyProps = props as any\n\n  const dimensions = useWindowDimensions()\n  const isLandscape = dimensions.width > dimensions.height\n\n  const [focused, setFocused] = React.useState<PossibleClockTypes>(\n    clockTypes.hours\n  )\n  const [localHours, setLocalHours] = React.useState<number>(anyProps.hours)\n  const [localMinutes, setLocalMinutes] = React.useState<number>(\n    getMinutes(anyProps.minutes)\n  )\n  const [localDayIndex, setLocalDayIndex] = React.useState<number>(\n    getDayIndex(anyProps.dayIndex)\n  )\n\n  const [displayMode, setDisplayMode] = React.useState<'AM' | 'PM' | undefined>(\n    undefined\n  )\n\n  // Initialize display Mode according the hours value\n  React.useEffect(() => {\n    if ((props.hours ?? 0) >= 12) {\n      setDisplayMode('PM')\n    } else {\n      setDisplayMode('AM')\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // update local state if changed from outside or if modal is opened\n  React.useEffect(() => {\n    setLocalDayIndex(getDayIndex(anyProps.dayIndex))\n    setLocalHours(getHours(anyProps.hours))\n    setLocalMinutes(getMinutes(anyProps.minutes))\n  }, [anyProps.hours, anyProps.minutes, anyProps.dayIndex])\n\n  const onInnerChangeDay = React.useCallback(\n    (dayIndex: number) => {\n      onChange &&\n        onChange({\n          dayIndex: dayIndex,\n          hours: localHours,\n          minutes: localMinutes,\n        })\n      setLocalDayIndex(dayIndex)\n    },\n    [localHours, localMinutes, onChange]\n  )\n\n  const onFocusInput = React.useCallback(\n    (type: PossibleClockTypes) => setFocused(type),\n    []\n  )\n  const onChangeClock = React.useCallback(\n    (params: {\n      focused?: PossibleClockTypes | undefined\n      hours: number\n      minutes: number\n    }) => {\n      if (params.focused) {\n        setFocused(params.focused)\n      }\n\n      setLocalHours(params.hours)\n      setLocalMinutes(params.minutes)\n    },\n    [setFocused, setLocalHours, setLocalMinutes]\n  )\n\n  const onInnerChangeClock = React.useCallback<onChangeFunc>(\n    (params: any) => {\n      params.hours = toHourOutputFormat(params.hours, localHours, true)\n      onChangeClock(params)\n    },\n    [localHours, onChangeClock]\n  )\n\n  const onInnerConfirm = React.useCallback(() => {\n    onConfirm({\n      dayIndex: localDayIndex,\n      hours: localHours,\n      minutes: localMinutes,\n    })\n  }, [onConfirm, localDayIndex, localHours, localMinutes])\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n      }}\n    >\n      <DatePickerModalHeaderBackground>\n        <DatePickerModalHeader\n          locale={locale}\n          onSave={onInnerConfirm}\n          isLoading={props.isLoading}\n          onDismiss={onDismiss}\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          uppercase={props.uppercase || true}\n          disableSafeTop={disableSafeTop}\n          closeIcon={props.closeIcon}\n          hideSaveButton\n        />\n        <DayTimePickerModalContentHeader\n          dayIndex={localDayIndex}\n          hours={localHours}\n          minutes={localMinutes}\n          duration={anyProps.duration}\n          mode=\"single\"\n          collapsed={true}\n          headerSeparator={props.headerSeparator}\n          emptyLabel={props.emptyLabel}\n          label={props.label}\n          moreLabel={props.moreLabel}\n          startLabel={props.startLabel}\n          endLabel={props.endLabel}\n          uppercase={props.uppercase || true}\n          locale={locale}\n          showSaveButton\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          isLoading={props.isLoading}\n          onSave={onInnerConfirm}\n        />\n      </DatePickerModalHeaderBackground>\n\n      {!hideDayPicker ? (\n        <View\n          style={\n            !hideDayPicker\n              ? { flexDirection: 'row', marginTop: 32 }\n              : {\n                  flex: 1,\n                  flexDirection: 'row',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }\n          }\n        >\n          {Array.from(Array(7)).map((_, index) => {\n            // required for Monday to show first\n            const adjustedIndex = index < 6 ? index + 1 : 0\n            return (\n              <DayOfWeek\n                dayIndex={adjustedIndex}\n                selected={localDayIndex === adjustedIndex}\n                onPressDay={onInnerChangeDay}\n                primaryColor=\"#0B6327\"\n                disabled={false}\n                textColorOnPrimary=\"#fff\"\n              />\n            )\n          })}\n        </View>\n      ) : null}\n      {!hideTimePicker ? (\n        <DisplayModeContext.Provider\n          value={{ mode: displayMode, setMode: setDisplayMode }}\n        >\n          <View\n            style={isLandscape ? styles.rootLandscape : styles.rootPortrait}\n          >\n            <TimeInputs\n              inputType={'keyboard'}\n              hours={localHours}\n              minutes={localMinutes}\n              is24Hour\n              onChange={onChangeClock}\n              onFocusInput={onFocusInput}\n              focused={focused}\n            />\n            <View style={styles.clockContainer}>\n              <AnalogClock\n                hours={toHourInputFormat(localHours, true)}\n                minutes={localMinutes}\n                focused={focused}\n                is24Hour\n                onChange={onInnerChangeClock}\n              />\n            </View>\n          </View>\n        </DisplayModeContext.Provider>\n      ) : null}\n    </View>\n  )\n}\n\nfunction getMinutes(minutes: number | undefined | null): number {\n  return minutes === undefined || minutes === null\n    ? new Date().getMinutes()\n    : minutes\n}\nfunction getHours(hours: number | undefined | null): number {\n  return hours === undefined || hours === null ? new Date().getHours() : hours\n}\nfunction getDayIndex(dayIndex: number | undefined | null): number {\n  return dayIndex === undefined ||\n    dayIndex === null ||\n    dayIndex < 0 ||\n    dayIndex > 6\n    ? 0\n    : dayIndex\n}\n\nconst styles = StyleSheet.create({\n  rootLandscape: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 24 * 3 + 96 * 2 + circleSize,\n  },\n  rootPortrait: {},\n  clockContainer: { padding: 12 },\n})\n\nexport default React.memo(DateTimePickerModalContent)\n"],"mappings":"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"}