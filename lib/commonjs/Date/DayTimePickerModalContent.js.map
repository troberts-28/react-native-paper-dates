{"version":3,"names":["DateTimePickerModalContent","props","onChange","onConfirm","onDismiss","disableSafeTop","locale","anyProps","dimensions","useWindowDimensions","isLandscape","width","height","focused","setFocused","React","useState","clockTypes","hours","localHours","setLocalHours","localMinutes","setLocalMinutes","getMinutes","minutes","localDayIndex","setLocalDayIndex","getDayIndex","dayIndex","useEffect","getHours","onInnerChangeDay","useCallback","onFocusInput","type","onChangeClock","params","onInnerChangeClock","toHourOutputFormat","onInnerConfirm","flex","justifyContent","alignItems","isLoading","saveLabel","saveLabelDisabled","uppercase","closeIcon","duration","headerSeparator","emptyLabel","label","moreLabel","startLabel","endLabel","flexDirection","marginTop","Array","from","map","_","index","adjustedIndex","styles","rootLandscape","rootPortrait","clockContainer","toHourInputFormat","undefined","Date","StyleSheet","create","circleSize","padding","memo"],"sources":["DayTimePickerModalContent.tsx"],"sourcesContent":["import * as React from 'react'\nimport { View, StyleSheet, useWindowDimensions } from 'react-native'\n\nimport DatePickerModalHeader from './DatePickerModalHeader'\nimport DayTimePickerModalContentHeader, {\n  HeaderPickProps,\n} from './DayTimePickerModalContentHeader'\nimport DatePickerModalHeaderBackground from './DatePickerModalHeaderBackground'\nimport AnalogClock from '../Time/AnalogClock'\nimport {\n  toHourInputFormat,\n  toHourOutputFormat,\n  circleSize,\n  clockTypes,\n  PossibleClockTypes,\n} from '../Time/timeUtils'\nimport TimeInputs from '../Time/TimeInputs'\nimport DayOfWeek from './DayOfWeek'\n\ntype onChangeFunc = ({\n  hours,\n  minutes,\n  focused,\n}: {\n  hours: number\n  minutes: number\n  focused?: undefined | PossibleClockTypes\n}) => any\n\nexport interface DayTimePickerModalContentProps extends HeaderPickProps {\n  inputFormat?: string\n  locale: string\n  onDismiss: () => any\n  isLoading?: boolean\n  disableSafeTop?: boolean\n  saveLabelDisabled?: boolean\n  dayIndex?: number | undefined\n  hours?: number | undefined\n  minutes?: number | undefined\n  duration?: number | undefined | null\n  onChange?: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n  onConfirm: (params: {\n    dayIndex: number\n    hours: number\n    minutes: number\n  }) => void\n}\n\nexport function DateTimePickerModalContent(\n  props: DayTimePickerModalContentProps\n) {\n  const { onChange, onConfirm, onDismiss, disableSafeTop, locale } = props\n\n  const anyProps = props as any\n\n  const dimensions = useWindowDimensions()\n  const isLandscape = dimensions.width > dimensions.height\n\n  const [focused, setFocused] = React.useState<PossibleClockTypes>(\n    clockTypes.hours\n  )\n  const [localHours, setLocalHours] = React.useState<number>(anyProps.hours)\n  const [localMinutes, setLocalMinutes] = React.useState<number>(\n    getMinutes(anyProps.minutes)\n  )\n  const [localDayIndex, setLocalDayIndex] = React.useState<number>(\n    getDayIndex(anyProps.dayIndex)\n  )\n\n  // update local state if changed from outside or if modal is opened\n  React.useEffect(() => {\n    setLocalDayIndex(getDayIndex(anyProps.dayIndex))\n    setLocalHours(getHours(anyProps.hours))\n    setLocalMinutes(getMinutes(anyProps.minutes))\n  }, [anyProps.hours, anyProps.minutes, anyProps.dayIndex])\n\n  const onInnerChangeDay = React.useCallback(\n    (dayIndex: number) => {\n      onChange &&\n        onChange({\n          dayIndex: dayIndex,\n          hours: localHours,\n          minutes: localMinutes,\n        })\n      setLocalDayIndex(dayIndex)\n    },\n    [localHours, localMinutes, onChange]\n  )\n\n  const onFocusInput = React.useCallback(\n    (type: PossibleClockTypes) => setFocused(type),\n    []\n  )\n  const onChangeClock = React.useCallback(\n    (params: {\n      focused?: PossibleClockTypes | undefined\n      hours: number\n      minutes: number\n    }) => {\n      if (params.focused) {\n        setFocused(params.focused)\n      }\n\n      setLocalHours(params.hours)\n      setLocalMinutes(params.minutes)\n    },\n    [setFocused, setLocalHours, setLocalMinutes]\n  )\n\n  const onInnerChangeClock = React.useCallback<onChangeFunc>(\n    (params: any) => {\n      params.hours = toHourOutputFormat(params.hours, localHours, true)\n      onChangeClock(params)\n    },\n    [localHours, onChangeClock]\n  )\n\n  const onInnerConfirm = React.useCallback(() => {\n    onConfirm({\n      dayIndex: localDayIndex,\n      hours: localHours,\n      minutes: localMinutes,\n    })\n  }, [onConfirm, localDayIndex, localHours, localMinutes])\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        width: '100%',\n      }}\n    >\n      <DatePickerModalHeaderBackground>\n        <DatePickerModalHeader\n          locale={locale}\n          onSave={onInnerConfirm}\n          isLoading={props.isLoading}\n          onDismiss={onDismiss}\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          uppercase={props.uppercase || true}\n          disableSafeTop={disableSafeTop}\n          closeIcon={props.closeIcon}\n          hideSaveButton\n        />\n        <DayTimePickerModalContentHeader\n          dayIndex={localDayIndex}\n          hours={localHours}\n          minutes={localMinutes}\n          duration={anyProps.duration}\n          mode=\"single\"\n          collapsed={true}\n          headerSeparator={props.headerSeparator}\n          emptyLabel={props.emptyLabel}\n          label={props.label}\n          moreLabel={props.moreLabel}\n          startLabel={props.startLabel}\n          endLabel={props.endLabel}\n          uppercase={props.uppercase || true}\n          locale={locale}\n          showSaveButton\n          saveLabel={props.saveLabel}\n          saveLabelDisabled={props.saveLabelDisabled || false}\n          isLoading={props.isLoading}\n          onSave={onInnerConfirm}\n        />\n      </DatePickerModalHeaderBackground>\n\n      <View style={{ flexDirection: 'row', marginTop: 32 }}>\n        {Array.from(Array(7)).map((_, index) => {\n          // required for Monday to show first\n          const adjustedIndex = index < 6 ? index + 1 : 0\n          return (\n            <DayOfWeek\n              dayIndex={adjustedIndex}\n              selected={localDayIndex === adjustedIndex}\n              onPressDay={onInnerChangeDay}\n              primaryColor=\"#0B6327\"\n              disabled={false}\n              textColorOnPrimary=\"#fff\"\n            />\n          )\n        })}\n      </View>\n\n      <View style={isLandscape ? styles.rootLandscape : styles.rootPortrait}>\n        <TimeInputs\n          inputType={'picker'}\n          hours={localHours}\n          minutes={localMinutes}\n          is24Hour\n          onChange={onChangeClock}\n          onFocusInput={onFocusInput}\n          focused={focused}\n        />\n        <View style={styles.clockContainer}>\n          <AnalogClock\n            hours={toHourInputFormat(localHours, true)}\n            minutes={localMinutes}\n            focused={focused}\n            is24Hour\n            onChange={onInnerChangeClock}\n          />\n        </View>\n      </View>\n    </View>\n  )\n}\n\nfunction getMinutes(minutes: number | undefined | null): number {\n  return minutes === undefined || minutes === null\n    ? new Date().getMinutes()\n    : minutes\n}\nfunction getHours(hours: number | undefined | null): number {\n  return hours === undefined || hours === null ? new Date().getHours() : hours\n}\nfunction getDayIndex(dayIndex: number | undefined | null): number {\n  return dayIndex === undefined ||\n    dayIndex === null ||\n    dayIndex < 0 ||\n    dayIndex > 6\n    ? 0\n    : dayIndex\n}\n\nconst styles = StyleSheet.create({\n  rootLandscape: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: 24 * 3 + 96 * 2 + circleSize,\n  },\n  rootPortrait: {},\n  clockContainer: { padding: 12 },\n})\n\nexport default React.memo(DateTimePickerModalContent)\n"],"mappings":"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"}